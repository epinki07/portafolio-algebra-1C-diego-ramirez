<!DOCTYPE html>
<html lang="es"><head><meta charset="utf-8"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><title>Calculadora de Conversiones – Números Complejos</title><link href="../../css/style.css" rel="stylesheet"/></head><body class="actividad04"><a class="back-link" href="../../index.html">← Volver al portafolio</a>
<div class="container">
<h1>Calculadora de Números Complejos</h1>
<div class="author">
            Diego Ramirez - 1C Fundamentos de Álgebra<br/>
            Profesor: Jorge Javier Pedrozo
        </div>
<div class="instructions">
<strong>Instrucciones:</strong>
<ul>
<li>Ingresa un número complejo en cualquiera de las tres formas</li>
<li>Las otras formas se calcularán automáticamente</li>
<li>Los ángulos se expresan en radianes y en múltiplos de pi cuando es posible</li>
<li>Para ángulos puedes usar: pi, pi/2, pi/4, pi/3, pi/6, 2*pi, etc.</li>
<li>Para raíces cuadradas puedes usar: sqrt(2), sqrt(3), sqrt(5), etc.</li>
<li>Usa números decimales (ejemplo: 1.5, -2.7, 0.5)</li>
</ul>
</div>
<!-- Forma Cartesiana -->
<div class="form-section"></div>
<h2>Forma Cartesiana: <span style="color:#6366f1">a + bi</span></h2>
<div class="input-group">
<label>z =</label>
<input id="real" placeholder="a (ej: sqrt(2))" type="text"/>
<span class="operator">+</span>
<input id="imag" placeholder="b (ej: sqrt(3))" type="text"/>
<span class="operator">i</span>
</div>
<div class="result" id="cartesian-result">Ingresa los valores arriba</div>
</div>
<!-- Forma Polar -->
<div class="form-section">
<h2>Forma Polar: <span style="color:#6366f1">r(cos θ + i sin θ)</span></h2>
<div class="input-group">
<label>z =</label>
<input id="modulus" placeholder="r (ej: sqrt(2))" type="text"/>
<span class="operator">(cos</span>
<input id="angle" placeholder="θ (ej: pi/2)" type="text"/>
<span class="operator">+ i sin</span>
<input id="angle2" placeholder="θ" readonly="" style="background: #e0e7ff;" type="text"/>
<span class="operator">)</span>
</div>
<div class="result" id="polar-result">Ingresa los valores arriba</div>
</div>
<!-- Forma Exponencial -->
<div class="form-section">
<h2>Forma Exponencial: <span style="color:#6366f1">re<sup>iθ</sup></span></h2>
<div class="input-group">
<label>z =</label>
<input id="exp-modulus" placeholder="r (ej: sqrt(5))" type="text"/>
<span class="operator">e^(i*</span>
<input id="exp-angle" placeholder="θ (ej: pi/4)" type="text"/>
<span class="operator">)</span>
</div>
<div class="result" id="exponential-result">Ingresa los valores arriba</div>
</div>
<button class="clear-btn" onclick="clearAll()">Limpiar Todo</button>

<script>
        let isUpdating = false;

        // ==================== FUNCIONES DE PARSEO ====================

        function parseNumber(input) {
            if (!input && input !== 0) return 0;
            const inputStr = input.toString().trim();
            if (!inputStr) return 0;
            let expression = inputStr
                .replace(/sqrt\s*\(/gi, 'Math.sqrt(')
                .replace(/pi\b/gi, 'Math.PI');
            try {
                const result = Function('"use strict"; return (' + expression + ')')();
                if (isNaN(result) || !isFinite(result)) return 0;
                return result;
            } catch (error) {
                return 0;
            }
        }

        function parseAngle(input) {
            return parseNumber(input);
        }

        // ==================== FUNCIONES DE FORMATO ====================

        function angleToPI(angle) {
            if (Math.abs(angle) < 1e-8) return "0";
            // Múltiplos comunes de pi
            const piMultiples = [
                { value: Math.PI, text: "pi" },
                { value: Math.PI / 2, text: "pi/2" },
                { value: Math.PI / 3, text: "pi/3" },
                { value: Math.PI / 4, text: "pi/4" },
                { value: Math.PI / 6, text: "pi/6" },
                { value: 2 * Math.PI, text: "2*pi" },
                { value: 3 * Math.PI / 2, text: "3*pi/2" },
                { value: 2 * Math.PI / 3, text: "2*pi/3" },
                { value: 3 * Math.PI / 4, text: "3*pi/4" },
                { value: 5 * Math.PI / 6, text: "5*pi/6" },
                { value: 5 * Math.PI / 4, text: "5*pi/4" },
                { value: 4 * Math.PI / 3, text: "4*pi/3" },
                { value: 5 * Math.PI / 3, text: "5*pi/3" },
                { value: 7 * Math.PI / 4, text: "7*pi/4" },
                // Valores negativos
                { value: -Math.PI, text: "-pi" },
                { value: -Math.PI / 2, text: "-pi/2" },
                { value: -Math.PI / 3, text: "-pi/3" },
                { value: -Math.PI / 4, text: "-pi/4" },
                { value: -Math.PI / 6, text: "-pi/6" }
            ];
            for (let pm of piMultiples) {
                if (Math.abs(angle - pm.value) < 1e-8) {
                    return pm.text;
                }
            }
            // Intentar expresar como fracción de pi
            const ratio = angle / Math.PI;
            if (Math.abs(ratio - Math.round(ratio)) < 1e-8) {
                const intRatio = Math.round(ratio);
                if (intRatio === 1) return "pi";
                if (intRatio === -1) return "-pi";
                if (intRatio === 0) return "0";
                return intRatio + "*pi";
            }
            const denominators = [2, 3, 4, 6, 8, 12];
            for (let den of denominators) {
                const num = ratio * den;
                if (Math.abs(num - Math.round(num)) < 1e-8) {
                    const intNum = Math.round(num);
                    if (intNum === 0) return "0";
                    if (den === 1) {
                        return intNum === 1 ? "pi" : intNum === -1 ? "-pi" : intNum + "*pi";
                    }
                    if (intNum === 1) return "pi/" + den;
                    if (intNum === -1) return "-pi/" + den;
                    return intNum + "*pi/" + den;
                }
            }
            return angle.toFixed(6);
        }

        function formatNumber(num) {
            if (Math.abs(num) < 1e-10) return "0";
            const sqrtValues = [
                { value: Math.sqrt(2), text: "√2" },
                { value: Math.sqrt(3), text: "√3" },
                { value: Math.sqrt(5), text: "√5" },
                { value: Math.sqrt(6), text: "√6" },
                { value: Math.sqrt(7), text: "√7" },
                { value: Math.sqrt(8), text: "2√2" },
                { value: Math.sqrt(2) / 2, text: "√2/2" },
                { value: Math.sqrt(3) / 2, text: "√3/2" },
                { value: Math.sqrt(3) / 3, text: "√3/3" },
                { value: -Math.sqrt(2), text: "-√2" },
                { value: -Math.sqrt(3), text: "-√3" },
                { value: -Math.sqrt(2) / 2, text: "-√2/2" },
                { value: -Math.sqrt(3) / 2, text: "-√3/2" }
            ];
            for (let sv of sqrtValues) {
                if (Math.abs(num - sv.value) < 1e-8) {
                    return sv.text;
                }
            }
            const fractions = [
                { value: 1 / 2, text: "1/2" },
                { value: 1 / 3, text: "1/3" },
                { value: 2 / 3, text: "2/3" },
                { value: 1 / 4, text: "1/4" },
                { value: 3 / 4, text: "3/4" },
                { value: 1 / 6, text: "1/6" },
                { value: 5 / 6, text: "5/6" },
                { value: -1 / 2, text: "-1/2" },
                { value: -1 / 3, text: "-1/3" },
                { value: -2 / 3, text: "-2/3" }
            ];
            for (let frac of fractions) {
                if (Math.abs(num - frac.value) < 1e-8) {
                    return frac.text;
                }
            }
            if (Math.abs(num - Math.round(num)) < 1e-8) {
                return Math.round(num).toString();
            }
            return parseFloat(num.toFixed(6)).toString();
        }

        function normalizeAngle(angle) {
            while (angle > Math.PI) angle -= 2 * Math.PI;
            while (angle <= -Math.PI) angle += 2 * Math.PI;
            return angle;
        }

        // ==================== ACTUALIZACIÓN DE FORMAS ====================

        function updateResults(real, imag, modulus, angle) {
            // Cartesiana
            document.getElementById('cartesian-result').textContent =
                `z = ${formatNumber(real)} + ${formatNumber(imag)}i`;
            // Polar
            document.getElementById('polar-result').textContent =
                `z = ${formatNumber(modulus)} (cos(${angleToPI(angle)}) + i sin(${angleToPI(angle)}))`;
            // Exponencial
            document.getElementById('exponential-result').textContent =
                `z = ${formatNumber(modulus)} e^(i${angleToPI(angle)})`;
        }

        function updateFromCartesian() {
            if (isUpdating) return;
            isUpdating = true;
            const real = parseNumber(document.getElementById('real').value) || 0;
            const imag = parseNumber(document.getElementById('imag').value) || 0;
            const modulus = Math.sqrt(real * real + imag * imag);
            let angle = Math.atan2(imag, real);
            angle = normalizeAngle(angle);
            const modulusFormatted = formatNumber(modulus);
            const angleFormatted = angleToPI(angle);
            document.getElementById('modulus').value = modulusFormatted;
            document.getElementById('angle').value = angleFormatted;
            document.getElementById('angle2').value = angleFormatted;
            document.getElementById('exp-modulus').value = modulusFormatted;
            document.getElementById('exp-angle').value = angleFormatted;
            updateResults(real, imag, modulus, angle);
            isUpdating = false;
        }

        function updateFromPolar() {
            if (isUpdating) return;
            isUpdating = true;
            const modulus = parseNumber(document.getElementById('modulus').value) || 0;
            const angle = parseAngle(document.getElementById('angle').value) || 0;
            const normalizedAngle = normalizeAngle(angle);
            const angleFormatted = angleToPI(normalizedAngle);
            document.getElementById('angle2').value = angleFormatted;
            const real = modulus * Math.cos(normalizedAngle);
            const imag = modulus * Math.sin(normalizedAngle);
            document.getElementById('real').value = formatNumber(real);
            document.getElementById('imag').value = formatNumber(imag);
            document.getElementById('exp-modulus').value = formatNumber(modulus);
            document.getElementById('exp-angle').value = angleFormatted;
            updateResults(real, imag, modulus, normalizedAngle);
            isUpdating = false;
        }

        function updateFromExponential() {
            if (isUpdating) return;
            isUpdating = true;
            const modulus = parseNumber(document.getElementById('exp-modulus').value) || 0;
            const angle = parseAngle(document.getElementById('exp-angle').value) || 0;
            const normalizedAngle = normalizeAngle(angle);
            const real = modulus * Math.cos(normalizedAngle);
            const imag = modulus * Math.sin(normalizedAngle);
            const angleFormatted = angleToPI(normalizedAngle);
            document.getElementById('real').value = formatNumber(real);
            document.getElementById('imag').value = formatNumber(imag);
            document.getElementById('modulus').value = formatNumber(modulus);
            document.getElementById('angle').value = angleFormatted;
            document.getElementById('angle2').value = angleFormatted;
            updateResults(real, imag, modulus, normalizedAngle);
            isUpdating = false;
        }

        function clearAll() {
            const inputs = document.querySelectorAll('input[type="text"]');
            inputs.forEach(input => {
                if (!input.readOnly) input.value = '';
                else input.value = '';
            });
            const results = document.querySelectorAll('.result');
            results.forEach(result => result.textContent = "Ingresa los valores arriba");
        }

        // ==================== EVENTOS ====================

        document.addEventListener('DOMContentLoaded', function () {
            document.getElementById('real').addEventListener('input', updateFromCartesian);
            document.getElementById('imag').addEventListener('input', updateFromCartesian);
            document.getElementById('modulus').addEventListener('input', updateFromPolar);
            document.getElementById('angle').addEventListener('input', function () {
                document.getElementById('angle2').value = this.value;
                updateFromPolar();
            });
            document.getElementById('exp-modulus').addEventListener('input', updateFromExponential);
            document.getElementById('exp-angle').addEventListener('input', updateFromExponential);
            const inputs = document.querySelectorAll('input[type="text"]');
            inputs.forEach(input => {
                if (!input.readOnly) {
                    input.addEventListener('keypress', function (e) {
                        if (e.key === 'Enter') {
                            input.blur();
                        }
                    });
                }
            });
        });
    </script>
</body></html>